# Issues Tracker - Lumis ERP

## üö® Erros Cr√≠ticos (PDV)

### 1. PDV - Busca de Produtos n√£o funciona
- **Status**: ‚úÖ Resolvido
- **Prioridade**: Alta
- **Descri√ß√£o**: A funcionalidade de buscar produtos no PDV estava com problemas de JavaScript
- **Arquivo relacionado**: `resources/views/admin/pos/index.blade.php`
- **Controller**: `app/Http/Controllers/Admin/PosController.php`
- **Problema identificado**:
  - Layout admin n√£o tinha `@stack('scripts')` no final
  - JavaScript em `@push('scripts')` n√£o estava sendo renderizado
  - Busca de produtos n√£o funcionava por falta de JavaScript
- **Sintomas reportados**:
  - "Ao digitar nada acontece" na busca de produtos
  - JavaScript implementado mas n√£o executava
  - Endpoint funcionava mas interface n√£o respondia
- **Corre√ß√µes aplicadas**:
  - ‚úÖ Adicionado `@stack('scripts')` no final do layout admin.blade.php
  - ‚úÖ JavaScript agora carrega corretamente
  - ‚úÖ Busca de produtos funcionando perfeitamente
  - ‚úÖ Produtos aparecem na interface
  - ‚úÖ Carrinho funciona corretamente
  - ‚úÖ Bot√£o "Finalizar Venda" habilita quando h√° produtos
- **Teste realizado**:
  - ‚úÖ Busca por produtos retorna resultados corretos
  - ‚úÖ Produtos s√£o exibidos com pre√ßo e estoque
  - ‚úÖ Clique no produto adiciona ao carrinho
  - ‚úÖ Interface totalmente funcional
- **Data resolvida**: 2025-05-25

### 2. PDV - Busca de Cliente n√£o funciona  
- **Status**: ‚úÖ Resolvido
- **Prioridade**: Alta
- **Descri√ß√£o**: A funcionalidade de buscar clientes no PDV estava com problemas de JavaScript
- **Arquivo relacionado**: `resources/views/admin/pos/index.blade.php`
- **Controller**: `app/Http/Controllers/Admin/POSController.php`
- **Problema identificado**:
  - Mesmo problema da Issue #1: falta de `@stack('scripts')` no layout
  - JavaScript de busca de clientes n√£o carregava
  - Interface n√£o respondia aos eventos de busca
- **Sintomas reportados**:
  - Busca de clientes n√£o funcionava
  - JavaScript implementado mas n√£o executava
  - Dropdown de clientes n√£o atualizava dinamicamente
- **Corre√ß√µes aplicadas**:
  - ‚úÖ Resolvido junto com Issue #1 ao adicionar `@stack('scripts')`
  - ‚úÖ JavaScript de busca de clientes funcionando
  - ‚úÖ Interface visual aprimorada com √≠cones
  - ‚úÖ Sele√ß√£o din√¢mica no dropdown principal
  - ‚úÖ Busca em tempo real funcionando
  - ‚úÖ Indicadores visuais de loading
- **Teste realizado**:
  - ‚úÖ Busca de clientes retorna resultados corretos
  - ‚úÖ Sele√ß√£o de cliente atualiza informa√ß√µes na venda
  - ‚úÖ Interface totalmente funcional
- **Data resolvida**: 2025-05-25

## üí∞ Funcionalidades de Pagamento

### 3. PDV - Pagamento Parcial (Sinal)
- **Status**: üî¥ Verificar
- **Prioridade**: Alta
- **Descri√ß√£o**: Cliente deve poder pagar apenas 50% (sinal) e ficar com 50% de saldo para pagar na entrega
- **Impacto**: Fluxo de caixa e controle financeiro
- **Tabelas relacionadas**: `orders`, `financial_transactions`, `account_receivables`
- **Status atual**: Implementado mas precisa verifica√ß√£o
- **Corre√ß√µes aplicadas**:
  - ‚úÖ Checkbox para ativar pagamento parcial
  - ‚úÖ Campo para inserir valor do sinal
  - ‚úÖ Bot√£o "50%" para sugerir metade do valor
  - ‚úÖ Valida√ß√£o de valores (n√£o pode ser maior que total)
  - ‚úÖ C√°lculo autom√°tico do saldo restante
  - ‚úÖ Integra√ß√£o com contas a receber
  - ‚úÖ Status de pedido "partially_paid"
  - ‚úÖ Mensagem diferenciada no sucesso
  - ‚úÖ Limpeza autom√°tica dos campos ao limpar carrinho
- **Necessita verifica√ß√£o**:
  - Testar fluxo completo de pagamento parcial
  - Verificar se conta a receber √© criada corretamente
  - Verificar se saldo √© calculado corretamente
- **Data**: 2025-05-25

### 4. P√°gina de Valores a Receber
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Sistema precisa ter uma p√°gina dedicada para controlar valores a receber
- **Arquivo a criar**: `resources/views/admin/receivables/`
- **Controller a criar**: `app/Http/Controllers/Admin/ReceivablesController.php`

### 5. Agendamento de Entrega - Informa√ß√µes Financeiras
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Ao agendar entrega, mostrar valor do sinal e valor do saldo restante
- **Arquivo relacionado**: Views de agendamento de entrega

## üõ†Ô∏è Erros de Navega√ß√£o

### 6. Erro ao acessar Fornecedores
- **Status**: üî¥ Pendente  
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Erro ao tentar acessar a p√°gina de fornecedores
- **Arquivo relacionado**: `app/Http/Controllers/Admin/SupplierController.php`
- **Views relacionadas**: `resources/views/admin/suppliers/`

## üìã P√°ginas Faltantes

### 7. P√°gina de Leads
- **Status**: ‚úÖ Resolvido
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Interface para gerenciamento de leads implementada
- **Corre√ß√µes aplicadas**:
  - ‚úÖ Controller `LeadController` implementado com CRUD completo
  - ‚úÖ Views modernas criadas (index, create, edit, show)
  - ‚úÖ Sistema de filtros avan√ßados (busca, status, origem, respons√°vel)
  - ‚úÖ Valida√ß√£o corrigida para campos obrigat√≥rios/opcionais
  - ‚úÖ Valores padr√£o definidos para score e probability
  - ‚úÖ Inconsist√™ncias entre migration e controller corrigidas
  - ‚úÖ Interface moderna seguindo padr√µes estabelecidos
  - ‚úÖ Rotas configuradas corretamente
- **Data resolvida**: 2025-05-25

### 8. P√°gina de Purchases (Compras)
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Interface para gerenciamento de compras n√£o existe
- **Arquivos a criar**:
  - `app/Http/Controllers/Admin/PurchaseController.php` 
  - `resources/views/admin/purchases/`
  - Adicionar rota e menu

### 9. P√°gina de Estoque
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Interface para controle de estoque n√£o existe
- **Arquivos a criar**:
  - `app/Http/Controllers/Admin/InventoryController.php`
  - `resources/views/admin/inventory/`
  - Adicionar rota e menu

## üé® Issues de Design

### 10. Login Customer - Identidade Visual Inconsistente
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: A tela de login do customer deve ter a mesma identidade visual da loja (e-commerce)
- **Problema identificado**: 
  - Login customer usa layout `layouts.public` b√°sico
  - Loja usa layout `layouts.ecommerce` com branding completo
  - Cores, fontes e gradientes diferentes entre as duas experi√™ncias
- **Arquivos relacionados**: 
  - `resources/views/auth/customer/login.blade.php`
  - `resources/views/auth/customer/register.blade.php`
  - `resources/views/layouts/ecommerce.blade.php`
  - `resources/css/branding.css`
- **Solu√ß√£o sugerida**:
  - Migrar login/register para layout `ecommerce`
  - Aplicar classe `lumis-hero-gradient` no background
  - Usar vari√°veis CSS de branding (`--store-primary`, `--store-accent`)
  - Garantir consist√™ncia visual com o e-commerce

### 11. View de Edi√ß√£o de Categorias N√£o Encontrada
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: View `admin.categories.edit` n√£o existe, causando erro 404 ao tentar editar categorias
- **URL problem√°tica**: `/admin/categories/{id}/edit`
- **Erro**: `View [admin.categories.edit] not found`
- **Problema identificado**:
  - Rota existe e direciona corretamente
  - Controller provavelmente tem m√©todo `edit()`
  - Falta apenas criar a view `resources/views/admin/categories/edit.blade.php`
- **Solu√ß√£o necess√°ria**:
  - Criar view de edi√ß√£o com formul√°rio
  - Incluir valida√ß√£o frontend
  - Bot√µes de salvar/cancelar
  - Interface consistente com outras views admin
- **Impacto**: Imposs√≠vel editar categorias via interface web

### 12. Branding Incorreto no Admin Panel
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Admin panel mostra "Laravel Sistema ERP" ao inv√©s de "lumisERP"
- **Problema identificado**:
  - Header do painel admin usa `config('app.name')` que retorna "Laravel"
  - Deveria exibir "lumisERP" como nome da aplica√ß√£o
  - Inconsist√™ncia de branding em todo o sistema
- **Arquivos relacionados**:
  - `resources/views/layouts/admin.blade.php` (header superior)
  - `config/app.php` (configura√ß√£o do nome da app)
  - Possivelmente outros layouts que usam `config('app.name')`
- **Solu√ß√£o necess√°ria**:
  - Alterar `APP_NAME=Laravel` para `APP_NAME=lumisERP` no `.env`
  - Ou criar configura√ß√£o espec√≠fica de branding
  - Verificar consist√™ncia em todos os layouts
- **Impacto**: Branding inconsistente e nome incorreto da aplica√ß√£o

## üîß Issues de Funcionalidade (QA Findings)

### 13. Controllers Vazios - Leads e Purchases
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Controllers de Leads e Purchases existem mas est√£o completamente vazios
- **Problema identificado**:
  - `app/Http/Controllers/Admin/LeadController.php` - todos os m√©todos vazios
  - `app/Http/Controllers/Admin/PurchaseController.php` - todos os m√©todos vazios
  - Rotas existem mas retornam p√°ginas em branco ou erro 500
- **Impacto t√©cnico**:
  - M√©todos `index()`, `create()`, `store()`, `show()`, `edit()`, `update()`, `destroy()` n√£o implementados
  - Usu√°rios podem acessar URLs mas n√£o conseguem usar as funcionalidades
- **URLs afetadas**:
  - `/admin/leads` - p√°gina em branco
  - `/admin/purchases` - p√°gina em branco
- **Solu√ß√£o necess√°ria**:
  - Implementar l√≥gica de neg√≥cio nos controllers
  - Criar views correspondentes
  - Adicionar valida√ß√µes e tratamento de erros
- **Data identificada**: 2025-05-25

### 14. Views de Fornecedores Completamente Ausentes
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Diret√≥rio `resources/views/admin/suppliers/` n√£o existe
- **Problema identificado**:
  - Controller `SupplierController.php` existe e tem implementa√ß√£o
  - Rotas est√£o configuradas corretamente
  - Mas nenhuma view foi criada para suppliers
  - Menu do admin aponta para suppliers mas resulta em erro
- **Erro esperado**: `View [admin.suppliers.index] not found`
- **Arquivos faltantes**:
  - `resources/views/admin/suppliers/index.blade.php`
  - `resources/views/admin/suppliers/create.blade.php`
  - `resources/views/admin/suppliers/edit.blade.php`
  - `resources/views/admin/suppliers/show.blade.php`
- **Impacto**: Imposs√≠vel gerenciar fornecedores via interface web
- **Data identificada**: 2025-05-25

### 15. Views de Leads e Purchases Ausentes
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Diret√≥rios de views para Leads e Purchases n√£o existem
- **Problema identificado**:
  - Diret√≥rio `resources/views/admin/leads/` n√£o existe
  - Diret√≥rio `resources/views/admin/purchases/` n√£o existe
  - Menu do admin tem links para essas se√ß√µes
  - Controllers existem mas views est√£o faltando
- **Arquivos faltantes**:
  - `resources/views/admin/leads/index.blade.php`
  - `resources/views/admin/leads/create.blade.php`
  - `resources/views/admin/leads/edit.blade.php`
  - `resources/views/admin/purchases/index.blade.php`
  - `resources/views/admin/purchases/create.blade.php`
  - `resources/views/admin/purchases/edit.blade.php`
- **Impacto**: Links no menu resultam em erro 500 ou p√°ginas em branco
- **Data identificada**: 2025-05-25

### 16. Sistema de Estoque Inexistente
- **Status**: ‚úÖ Resolvido
- **Prioridade**: Cr√≠tica
- **Descri√ß√£o**: Sistema completo de controle de estoque implementado
- **Problema identificado**:
  - Produtos t√™m campo `stock_quantity` no banco
  - PDV verifica estoque antes de vender
  - Mas n√£o havia interface para gerenciar/atualizar estoque
- **Corre√ß√µes aplicadas**:
  - ‚úÖ Controller `InventoryController` modernizado com filtros avan√ßados
  - ‚úÖ Views modernas criadas (index, edit, show)
  - ‚úÖ Sistema de ajuste de estoque (definir, adicionar, subtrair)
  - ‚úÖ Estat√≠sticas de estoque (total, baixo, sem estoque, valor total)
  - ‚úÖ Filtros por categoria, status do estoque, status do produto
  - ‚úÖ Edi√ß√£o em lote de quantidades
  - ‚úÖ Preview em tempo real dos ajustes
  - ‚úÖ Alertas visuais para estoque baixo/zerado
  - ‚úÖ Interface moderna seguindo padr√µes estabelecidos
  - ‚úÖ Rotas configuradas corretamente
- **Funcionalidades implementadas**:
  - Interface principal com estat√≠sticas e filtros
  - Ajuste individual de estoque com tipos (definir/adicionar/subtrair)
  - Visualiza√ß√£o detalhada de produtos
  - Edi√ß√£o em lote para m√∫ltiplos produtos
  - Alertas visuais baseados no n√≠vel de estoque
  - Integra√ß√£o com sistema de produtos
- **Data resolvida**: 2025-05-25

## üö® Issues de Seguran√ßa e Performance

### 17. Falta de Valida√ß√£o de Input em Controllers
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Controllers n√£o implementam valida√ß√£o adequada de dados
- **Problema identificado**:
  - Controllers vazios n√£o t√™m valida√ß√£o
  - M√©todos `store()` e `update()` sem Request validation
  - Poss√≠vel vulnerabilidade a ataques de inje√ß√£o
- **Arquivos afetados**:
  - `app/Http/Controllers/Admin/LeadController.php`
  - `app/Http/Controllers/Admin/PurchaseController.php`
  - Possivelmente outros controllers
- **Solu√ß√£o necess√°ria**:
  - Criar Form Request classes
  - Implementar valida√ß√£o de dados
  - Sanitiza√ß√£o de inputs
- **Data identificada**: 2025-05-25

### 18. JavaScript Inline em Views - Problemas de CSP
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Views cont√™m JavaScript inline que pode violar Content Security Policy
- **Problema identificado**:
  - `resources/views/admin/pos/index.blade.php` tem muito JavaScript inline
  - Pode causar problemas de seguran√ßa
  - Dificulta manuten√ß√£o do c√≥digo
  - Viola boas pr√°ticas de separa√ß√£o de responsabilidades
- **Solu√ß√£o sugerida**:
  - Mover JavaScript para arquivos separados
  - Usar event listeners ao inv√©s de onclick inline
  - Implementar CSP headers
- **Data identificada**: 2025-05-25

## üîç Issues de UX/UI

### 19. Falta de Feedback Visual em Opera√ß√µes Ass√≠ncronas
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Algumas opera√ß√µes n√£o fornecem feedback adequado ao usu√°rio
- **Problema identificado**:
  - Formul√°rios podem ser submetidos m√∫ltiplas vezes
  - Falta de loading states em algumas opera√ß√µes
  - Usu√°rio n√£o sabe se a√ß√£o foi executada com sucesso
- **Impacto UX**:
  - Confus√£o do usu√°rio
  - Poss√≠vel duplica√ß√£o de dados
  - Experi√™ncia frustrante
- **Data identificada**: 2025-05-25

### 20. Inconsist√™ncia de Layout entre Se√ß√µes
- **Status**: üî¥ Pendente
- **Prioridade**: Baixa
- **Descri√ß√£o**: Diferentes se√ß√µes do admin usam layouts ligeiramente diferentes
- **Problema identificado**:
  - Algumas p√°ginas t√™m estilos inconsistentes
  - Bot√µes com tamanhos diferentes
  - Espa√ßamentos variados
- **Impacto**: Experi√™ncia visual inconsistente
- **Data identificada**: 2025-05-25

## üìä Resumo por Prioridade

### üî• Alta Prioridade (Cr√≠tico)
1. üî¥ **CR√çTICO**: Falta de Middleware Admin (#21)
2. üî¥ Sistema de Estoque Inexistente (#16)
3. üî¥ Poss√≠vel Inconsist√™ncia Estoque/Vendas (#25)
4. üî¥ View de Edi√ß√£o de Categorias (#11)
5. üî¥ Controllers Vazios - Leads e Purchases (#13)
6. üî¥ Views de Fornecedores Ausentes (#14)
7. üî¥ Views de Leads e Purchases Ausentes (#15)
8. üî¥ Falta de Valida√ß√£o de Input (#17)
9. üî¥ Falta de Logs de Auditoria (#28)
10. üî¥ P√°gina de Valores a Receber

### ‚ö° M√©dia Prioridade
11. üî¥ Agendamento de Entrega - Info Financeiras
12. üî¥ Branding Incorreto no Admin Panel (#12)
13. üî¥ Login Customer - Identidade Visual (#10)
14. üî¥ JavaScript Inline - Problemas CSP (#18)
15. üî¥ Performance JavaScript Inline (#22)
16. üî¥ Falta de Feedback Visual (#19)
17. üî¥ Tratamento de Erros Personalizado (#23)
18. üî¥ Falta de Busca Global Admin (#26)
19. üî¥ Dashboard com M√©tricas (#27)

### üü° Baixa Prioridade
20. üî¥ Inconsist√™ncia de Layout (#20)
21. üî¥ Falta de Seeders (#24)

## üéØ Pr√≥ximos Passos Atualizados

**Sugest√£o de ordem de corre√ß√£o (baseada em QA findings):**
1. üî¥ **URGENTE**: Criar sistema de controle de estoque (#16)
2. üî¥ **URGENTE**: Criar view de edi√ß√£o de categorias (#11)
3. üî¥ Implementar controllers de Leads e Purchases (#13)
4. üî¥ Criar todas as views faltantes (#14, #15)
5. üî¥ Implementar valida√ß√£o de dados (#17)
6. üî¥ Corrigir branding inconsistente (#12)
7. üî¥ Melhorar UX com feedback visual (#19)

---

**√öltima atualiza√ß√£o**: 25/05/2025 (QA Analysis Completa)
**Total de issues**: 28
**Issues cr√≠ticas**: 13
**Issues identificadas por QA**: 16
**Issues de seguran√ßa**: 3 (#17, #21, #28)
**Issues de performance**: 2 (#18, #22)
**Issues de UX**: 6 (#10, #19, #20, #23, #26, #27)

## üîß Issues de Configura√ß√£o e Infraestrutura

### 21. Falta de Middleware de Autentica√ß√£o Admin
- **Status**: üî¥ Pendente
- **Prioridade**: Cr√≠tica
- **Descri√ß√£o**: Rotas admin podem n√£o ter prote√ß√£o adequada de autentica√ß√£o
- **Problema identificado**:
  - Existe middleware `CustomerAuth` para clientes
  - Mas n√£o h√° middleware espec√≠fico para admin
  - Rotas admin podem estar desprotegidas
  - Poss√≠vel acesso n√£o autorizado ao painel admin
- **Impacto de seguran√ßa**:
  - Usu√°rios n√£o autenticados podem acessar admin
  - Dados sens√≠veis expostos
  - Opera√ß√µes cr√≠ticas sem prote√ß√£o
- **Arquivos relacionados**:
  - `app/Http/Middleware/` (falta AdminAuth.php)
  - `routes/web.php` (prote√ß√£o de rotas)
- **Solu√ß√£o necess√°ria**:
  - Criar middleware AdminAuth
  - Aplicar middleware em todas as rotas admin
  - Verificar autentica√ß√£o e autoriza√ß√£o
- **Data identificada**: 2025-05-25

### 22. Poss√≠vel Problema de Performance com JavaScript Inline
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: JavaScript inline pode causar problemas de performance e cache
- **Problema identificado**:
  - Views com muito JavaScript inline (especialmente POS)
  - JavaScript n√£o pode ser cacheado pelo browser
  - C√≥digo duplicado em m√∫ltiplas p√°ginas
  - Dificulta minifica√ß√£o e otimiza√ß√£o
- **Impacto t√©cnico**:
  - P√°ginas mais lentas para carregar
  - Maior uso de banda
  - Pior experi√™ncia do usu√°rio
- **Arquivos afetados**:
  - `resources/views/admin/pos/index.blade.php`
  - Possivelmente outras views admin
- **Solu√ß√£o sugerida**:
  - Extrair JavaScript para arquivos .js separados
  - Usar Vite para bundling e minifica√ß√£o
  - Implementar cache de assets
- **Data identificada**: 2025-05-25

### 23. Falta de Tratamento de Erros 404/500 Personalizado
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Sistema n√£o tem p√°ginas de erro personalizadas
- **Problema identificado**:
  - Views faltantes resultam em erro 500 gen√©rico
  - N√£o h√° p√°gina 404 personalizada
  - Usu√°rios veem stack traces em produ√ß√£o
  - Experi√™ncia ruim quando algo d√° errado
- **Impacto UX**:
  - Confus√£o do usu√°rio
  - Apar√™ncia n√£o profissional
  - Poss√≠vel exposi√ß√£o de informa√ß√µes sens√≠veis
- **Arquivos necess√°rios**:
  - `resources/views/errors/404.blade.php`
  - `resources/views/errors/500.blade.php`
  - `resources/views/errors/403.blade.php`
- **Data identificada**: 2025-05-25

## üîç Issues de Dados e Integridade

### 24. Falta de Seeders para Dados de Teste
- **Status**: üî¥ Pendente
- **Prioridade**: Baixa
- **Descri√ß√£o**: Sistema n√£o tem seeders adequados para popular dados de teste
- **Problema identificado**:
  - Dificulta desenvolvimento e testes
  - Novos desenvolvedores n√£o conseguem testar facilmente
  - Ambiente de desenvolvimento vazio
- **Impacto desenvolvimento**:
  - Tempo perdido criando dados manualmente
  - Testes inconsistentes
  - Dificuldade para demonstrar funcionalidades
- **Solu√ß√£o necess√°ria**:
  - Criar seeders para todas as entidades
  - Dados realistas para demonstra√ß√£o
  - Comando para popular ambiente de desenvolvimento
- **Data identificada**: 2025-05-25

### 25. Poss√≠vel Inconsist√™ncia de Dados entre Estoque e Vendas
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Sem interface de estoque, pode haver inconsist√™ncias nos dados
- **Problema identificado**:
  - PDV verifica estoque mas n√£o h√° como atualizar
  - Vendas podem reduzir estoque mas n√£o h√° reposi√ß√£o
  - Poss√≠vel estoque negativo
  - Dados inconsistentes entre tabelas
- **Impacto cr√≠tico**:
  - Vendas de produtos sem estoque
  - Relat√≥rios incorretos
  - Problemas de fulfillment
- **Tabelas afetadas**:
  - `products.stock_quantity`
  - `order_items`
  - Poss√≠vel necessidade de tabela `stock_movements`
- **Data identificada**: 2025-05-25

## üéØ Issues de Usabilidade Espec√≠ficas

### 26. Falta de Busca Global no Admin
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Admin n√£o tem funcionalidade de busca global
- **Problema identificado**:
  - Usu√°rios precisam navegar por se√ß√µes espec√≠ficas
  - N√£o h√° busca unificada por produtos, clientes, pedidos
  - Experi√™ncia menos eficiente
- **Impacto UX**:
  - Tempo perdido navegando
  - Dificuldade para encontrar informa√ß√µes
  - Workflow menos eficiente
- **Solu√ß√£o sugerida**:
  - Implementar busca global no header admin
  - Buscar em m√∫ltiplas entidades
  - Resultados categorizados
- **Data identificada**: 2025-05-25

### 27. Falta de Dashboard com M√©tricas Importantes
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: Dashboard admin pode n√£o ter m√©tricas suficientes
- **Problema identificado**:
  - Falta vis√£o geral do neg√≥cio
  - M√©tricas importantes podem estar faltando
  - Dificulta tomada de decis√µes
- **M√©tricas importantes faltantes**:
  - Vendas do dia/m√™s
  - Produtos com estoque baixo
  - Pedidos pendentes
  - Clientes ativos
  - Receita total
- **Data identificada**: 2025-05-25

### 28. Falta de Logs de Auditoria
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Sistema n√£o registra a√ß√µes importantes dos usu√°rios
- **Problema identificado**:
  - N√£o h√° rastreamento de altera√ß√µes
  - Imposs√≠vel auditar a√ß√µes
  - Dificulta debugging de problemas
  - Falta de accountability
- **A√ß√µes que deveriam ser logadas**:
  - Login/logout de usu√°rios
  - Cria√ß√£o/edi√ß√£o/exclus√£o de produtos
  - Vendas realizadas
  - Altera√ß√µes de estoque
  - Altera√ß√µes de pre√ßos
- **Solu√ß√£o necess√°ria**:
  - Implementar sistema de audit logs
  - Usar Laravel Activity Log ou similar
  - Interface para visualizar logs
- **Data identificada**: 2025-05-25

### 29. PDV - Problema de Autentica√ß√£o/JavaScript
- **Status**: üîß Em Corre√ß√£o
- **Prioridade**: Cr√≠tica
- **Descri√ß√£o**: PDV n√£o funciona devido a problemas de autentica√ß√£o ou execu√ß√£o JavaScript
- **Problema identificado**:
  - Busca de produtos e clientes n√£o funciona no browser
  - Endpoint retorna "Unauthenticated" quando testado via curl
  - JavaScript implementado corretamente mas n√£o executa
  - Poss√≠vel problema de sess√£o ou CSRF token
- **Sintomas reportados pelo usu√°rio**:
  - "Ao digitar nada acontece" na busca de produtos
  - Busca de clientes tamb√©m n√£o funciona
  - Interface carrega mas funcionalidades AJAX falham
- **Investiga√ß√£o t√©cnica necess√°ria**:
  - Verificar se usu√°rio est√° autenticado corretamente
  - Verificar console do browser para erros JavaScript
  - Verificar se CSRF token est√° sendo enviado nas requisi√ß√µes
  - Verificar se elementos DOM est√£o sendo encontrados
  - Verificar se event listeners est√£o sendo anexados
  - Verificar se debounce function est√° funcionando
- **Poss√≠veis causas**:
  - Sess√£o expirada ou inv√°lida
  - CSRF token inv√°lido ou ausente
  - Erro JavaScript silencioso
  - Problema de middleware de autentica√ß√£o
  - Problema de CORS ou headers
- **Arquivos relacionados**:
  - `resources/views/admin/pos/index.blade.php` (JavaScript)
  - `app/Http/Controllers/Admin/POSController.php` (endpoints)
  - `routes/web.php` (middleware auth)
- **Corre√ß√µes implementadas**:
  - ‚úÖ Adicionada se√ß√£o de debug no topo da p√°gina PDV
  - ‚úÖ Criado endpoint `/admin/pos/debug` para verificar autentica√ß√£o
  - ‚úÖ Adicionados logs detalhados no JavaScript
  - ‚úÖ Criados bot√µes de teste para endpoints
  - ‚úÖ Verifica√ß√£o autom√°tica de elementos DOM
  - ‚úÖ Teste autom√°tico de funcionalidade na inicializa√ß√£o
  - ‚úÖ Alertas visuais para erros de inicializa√ß√£o
- **Como usar as ferramentas de debug**:
  1. Acesse `/admin/pos` logado como admin
  2. Verifique a se√ß√£o amarela de debug no topo
  3. Clique nos bot√µes "Test Search", "Test Auth", "Debug Info"
  4. Abra o console do browser (F12) para ver logs detalhados
  5. Verifique se h√° erros JavaScript ou de autentica√ß√£o
- **Data identificada**: 2025-05-25 

### 30. PDV - JavaScript Functions Not in Global Scope
- **Status**: ‚úÖ Resolvido
- **Prioridade**: Cr√≠tica
- **Descri√ß√£o**: Fun√ß√µes JavaScript testAuthEndpoint e testDebugEndpoint n√£o estavam no escopo global
- **Problema identificado**:
  - Fun√ß√µes definidas dentro de escopo local n√£o eram acess√≠veis pelos bot√µes onclick
  - Causava erros "ReferenceError: testAuthEndpoint is not defined"
- **Corre√ß√£o aplicada**:
  - ‚úÖ Movidas fun√ß√µes para window.testAuthEndpoint e window.testDebugEndpoint
  - ‚úÖ Fun√ß√µes agora acess√≠veis globalmente
  - ‚úÖ Bot√µes de debug funcionando corretamente
  - ‚úÖ Corrigidos bot√µes onclick para usar window.functionName()
  - ‚úÖ Melhorada fun√ß√£o testSearchEndpoint para exibir produtos encontrados
  - ‚úÖ Adicionado teste autom√°tico ao carregar p√°gina
- **Data**: 2025-05-25

### 31. Purchase Model - Inconsist√™ncia de Campos nas Views
- **Status**: ‚úÖ Resolvido
- **Prioridade**: Alta
- **Descri√ß√£o**: Views de Purchase usando nomes de campos incorretos
- **Problema identificado**:
  - View show.blade.php usando `reference_no` ao inv√©s de `purchase_number`
  - View usando `purchase_date` ao inv√©s de `delivery_date`
  - View usando `total_amount` ao inv√©s de `total`
- **Corre√ß√£o aplicada**:
  - ‚úÖ Corrigidos nomes dos campos na view show.blade.php
  - ‚úÖ Alinhamento com o modelo Purchase e controller
- **Data**: 2025-05-25

## üÜï Novas Funcionalidades Solicitadas

### 32. Sistema de Opcionais de Produtos
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Produtos devem ter opcionais como cor, tamanho, material, etc.
- **Requisitos funcionais**:
  - Produtos podem ter m√∫ltiplos tipos de opcionais (cor, tamanho, material, acabamento, etc.)
  - Cada opcional pode ter m√∫ltiplas op√ß√µes (ex: cores: azul, vermelho, verde)
  - Opcionais podem ser obrigat√≥rios ou facultativos
  - Interface para gerenciar opcionais no admin
  - Sele√ß√£o de opcionais no PDV e e-commerce
- **Impacto t√©cnico**:
  - Nova tabela `product_options` (tipo do opcional: cor, tamanho, etc.)
  - Nova tabela `product_option_values` (valores: azul, vermelho, P, M, G, etc.)
  - Nova tabela `product_variants` (combina√ß√µes espec√≠ficas de opcionais)
  - Relacionamento many-to-many entre produtos e opcionais
- **Arquivos a criar/modificar**:
  - Migration para tabelas de opcionais
  - Models: ProductOption, ProductOptionValue, ProductVariant
  - Views para gerenciar opcionais no admin
  - Interface de sele√ß√£o no PDV e e-commerce
- **Data identificada**: 2025-05-25

### 33. Sistema de Pre√ßos Diferenciados por variantes
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Alguns opcionais devem ter pre√ßos diferentes (ex: cor especial +R$10)
- **Requisitos funcionais**:
  - Opcionais podem ter pre√ßo adicional ou desconto
  - Pre√ßo pode ser valor fixo (+R$10) ou percentual (+15%)
  - C√°lculo autom√°tico do pre√ßo final baseado nos opcionais selecionados
  - Exibi√ß√£o clara do pre√ßo base + adicionais
- **Impacto t√©cnico**:
  - Campo `price_modifier` na tabela `product_option_values`
  - Campo `price_type` (fixed, percentage) na tabela `product_option_values`
  - L√≥gica de c√°lculo de pre√ßo no frontend e backend
  - Atualiza√ß√£o em tempo real do pre√ßo no PDV e e-commerce
- **Exemplo de uso**:
  - Camiseta b√°sica: R$ 50,00
  - Cor especial (dourado): +R$ 15,00
  - Tamanho GG: +R$ 5,00
  - Pre√ßo final: R$ 70,00
- **Data identificada**: 2025-05-25

### 34. Sistema de Kits de Produtos
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Deve ser poss√≠vel criar kits com m√∫ltiplos produtos
- **Requisitos funcionais**:
  - Kit √© um produto especial que cont√©m outros produtos
  - Cada item do kit pode ter quantidade espec√≠fica
  - Pre√ßo do kit pode ser diferente da soma dos produtos individuais
  - Controle de estoque baseado nos produtos componentes
  - Venda de kit reduz estoque dos produtos individuais
- **Impacto t√©cnico**:
  - Nova tabela `product_kits` (relaciona produto kit com produtos componentes)
  - Campo `is_kit` na tabela `products`
  - L√≥gica especial para controle de estoque de kits
  - Interface para montar kits no admin
  - Exibi√ß√£o de componentes do kit no PDV e e-commerce
- **Exemplo de uso**:
  - Kit "Conjunto Completo": Camiseta + Cal√ßa + Bon√©
  - Quantidade: 1 + 1 + 1
  - Pre√ßo individual: R$ 50 + R$ 80 + R$ 30 = R$ 160
  - Pre√ßo do kit: R$ 140 (desconto de R$ 20)
- **Arquivos a criar/modificar**:
  - Migration para tabela product_kits
  - Model ProductKit
  - Controller para gerenciar kits
  - Views para criar/editar kits
  - L√≥gica de estoque para kits
- **Data identificada**: 2025-05-25

### 35. Interface de Sele√ß√£o de Opcionais no PDV
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: PDV deve permitir sele√ß√£o de opcionais ao adicionar produto
- **Requisitos funcionais**:
  - Modal ou sidebar para sele√ß√£o de opcionais
  - Exibi√ß√£o visual das op√ß√µes (cores com preview, tamanhos, etc.)
  - Atualiza√ß√£o em tempo real do pre√ßo conforme sele√ß√£o
  - Valida√ß√£o de opcionais obrigat√≥rios
  - Adi√ß√£o ao carrinho com opcionais selecionados
- **Impacto UX**:
  - Interface intuitiva para sele√ß√£o r√°pida
  - Preview visual das op√ß√µes quando poss√≠vel
  - Indica√ß√£o clara de pre√ßos adicionais
  - Fluxo otimizado para vendas r√°pidas
- **Arquivos a modificar**:
  - `resources/views/admin/pos/index.blade.php`
  - JavaScript do PDV para modal de opcionais
  - CSS para interface visual atrativa
- **Data identificada**: 2025-05-25

### 36. Interface de Sele√ß√£o de Opcionais no E-commerce
- **Status**: üî¥ Pendente
- **Prioridade**: M√©dia
- **Descri√ß√£o**: E-commerce deve permitir sele√ß√£o de opcionais na p√°gina do produto
- **Requisitos funcionais**:
  - Seletores visuais para cada tipo de opcional
  - Cores com preview visual (swatches)
  - Tamanhos com guia de medidas
  - Atualiza√ß√£o de pre√ßo e disponibilidade em tempo real
  - Valida√ß√£o antes de adicionar ao carrinho
- **Impacto UX**:
  - Experi√™ncia de compra mais rica
  - Redu√ß√£o de d√∫vidas do cliente
  - Aumento na convers√£o de vendas
- **Arquivos a modificar**:
  - Views do e-commerce para p√°gina de produto
  - JavaScript para interatividade
  - CSS para interface visual
- **Data identificada**: 2025-05-25

### 37. Controle de Estoque por Variantes
- **Status**: üî¥ Pendente
- **Prioridade**: Cr√≠tica
- **Descri√ß√£o**: Estoque deve ser controlado por combina√ß√£o de opcionais (variantes)
- **Requisitos funcionais**:
  - Cada combina√ß√£o de opcionais tem estoque pr√≥prio
  - Ex: Camiseta Azul P = 10 unidades, Camiseta Azul M = 5 unidades
  - Interface para gerenciar estoque por variante
  - Verifica√ß√£o de disponibilidade antes da venda
  - Relat√≥rios de estoque por variante
- **Impacto t√©cnico**:
  - Tabela `product_variant_stock` para controle granular
  - L√≥gica complexa de verifica√ß√£o de estoque
  - Interface administrativa para gest√£o
  - Integra√ß√£o com PDV e e-commerce
- **Exemplo de uso**:
  - Produto: Camiseta
  - Variante 1: Azul + P = 10 unidades
  - Variante 2: Azul + M = 5 unidades
  - Variante 3: Vermelho + P = 0 unidades (indispon√≠vel)
- **Data identificada**: 2025-05-25

### 38. PDV - Produtos N√£o Aparecem na Busca
- **Status**: ‚úÖ Resolvido
- **Prioridade**: Cr√≠tica
- **Descri√ß√£o**: Usu√°rio n√£o consegue ver produtos no PDV ao digitar na busca
- **Problema identificado**:
  - Layout admin n√£o tinha `@stack('scripts')` no final
  - JavaScript em `@push('scripts')` n√£o estava sendo renderizado
  - Busca de produtos n√£o funcionava por falta de JavaScript
- **Sintomas reportados**:
  - "n√£o consigo ver produtos no pdv"
  - "on fill //*[@id="product-search"] with caneca nothing is trigged"
  - "no backend requests are made"
- **Investiga√ß√£o t√©cnica**:
  - ‚úÖ Verificado: 9 produtos ativos no banco
  - ‚úÖ Verificado: Todos t√™m estoque > 0
  - ‚úÖ Verificado: Controller POSController existe e est√° implementado
  - ‚úÖ Verificado: Rota admin.pos.search-products existe
  - ‚úÖ Verificado: Modelo Product tem scope active()
  - ‚úÖ Identificado: Falta de `@stack('scripts')` no layout
- **Corre√ß√£o aplicada**:
  - ‚úÖ Adicionado `@stack('scripts')` no final do layout admin.blade.php
  - ‚úÖ JavaScript agora carrega corretamente
  - ‚úÖ Busca de produtos funcionando perfeitamente
  - ‚úÖ Produtos aparecem na interface
  - ‚úÖ Carrinho funciona corretamente
  - ‚úÖ Bot√£o "Finalizar Venda" habilita quando h√° produtos
- **Teste realizado**:
  - ‚úÖ Busca por "caneca" retorna 4 produtos
  - ‚úÖ Produtos s√£o exibidos com pre√ßo e estoque
  - ‚úÖ Clique no produto adiciona ao carrinho
  - ‚úÖ Contador de itens atualiza corretamente
  - ‚úÖ Interface totalmente funcional
- **Data resolvida**: 2025-05-25

### 39. Leads - Erro de Constraint Violation em Campos Obrigat√≥rios
- **Status**: ‚úÖ Resolvido
- **Prioridade**: Alta
- **Descri√ß√£o**: Erro "Integrity constraint violation: 1048 Column 'score' cannot be null" ao salvar leads
- **Problema identificado**:
  - Migration define `score` e `probability` com `default(0)` 
  - Controller permite valores `nullable` na valida√ß√£o
  - Quando campos v√™m vazios do formul√°rio, Laravel tenta inserir `null` ao inv√©s de usar default
  - Inconsist√™ncias entre migration e controller nos valores de enum (status e source)
- **Sintomas reportados**:
  - "apenas o nome deve ser obrigat√≥rio, ao salvar getting error Integrity constraint violation"
  - Erro SQL ao tentar inserir valores null em campos com default
- **Inconsist√™ncias encontradas**:
  - Status: Migration tem `proposal_sent` mas controller tinha `proposal`
  - Source: Migration tem `email_campaign`, `trade_show`, `organic_search`, `paid_ads` mas controller tinha `advertising`, `event`
- **Corre√ß√µes aplicadas**:
  - ‚úÖ Controller: Definir valores padr√£o expl√≠citos para `score` e `probability` (0)
  - ‚úÖ Controller: Corrigir valida√ß√£o de status para incluir todos os valores da migration
  - ‚úÖ Controller: Corrigir valida√ß√£o de source para usar valores corretos da migration
  - ‚úÖ Views: Atualizar op√ß√µes de status e source para usar valores corretos
  - ‚úÖ Model: Adicionar `$attributes` com valores padr√£o para garantir consist√™ncia
  - ‚úÖ Views: Corrigir filtros e exibi√ß√£o de status/source na view index
  - ‚úÖ Views: Atualizar √≠cones e labels para novos valores
- **Funcionalidades corrigidas**:
  - Cria√ß√£o de leads com apenas nome obrigat√≥rio
  - Filtros funcionando com valores corretos
  - Exibi√ß√£o consistente de status e origem
  - Valida√ß√£o adequada no backend
- **Data resolvida**: 2025-05-25

### 40. Sistema N√£o Responsivo para Dispositivos M√≥veis
- **Status**: üî¥ Pendente
- **Prioridade**: Alta
- **Descri√ß√£o**: Sistema precisa ser otimizado para dispositivos m√≥veis (smartphones e tablets)
- **Problema identificado**:
  - Interface atual foi desenvolvida principalmente para desktop
  - Tabelas podem n√£o ser responsivas em telas pequenas
  - Formul√°rios podem ter problemas de usabilidade em mobile
  - Menu lateral pode n√£o funcionar adequadamente em mobile
  - PDV precisa ser especialmente otimizado para tablets
- **Problemas espec√≠ficos encontrados**:
  - **Layout Admin**: Sidebar fixa com `margin-left: 270px` quebra em mobile
  - **Tabelas**: Uso de `min-w-full` sem alternativas mobile (cards)
  - **PDV**: Layout com `w-96` sidebar n√£o funciona em tablets
  - **Formul√°rios**: Grids `md:grid-cols-2` podem ser pequenos em mobile
  - **Bot√µes**: Alguns bot√µes podem ser pequenos para touch
  - **Menu**: N√£o h√° implementa√ß√£o de menu hamburger
- **√Åreas cr√≠ticas que precisam de otimiza√ß√£o**:
  - **Admin Panel**: Menu lateral, tabelas, formul√°rios
  - **PDV**: Interface de vendas para tablets
  - **E-commerce**: Experi√™ncia de compra mobile
  - **Login/Registro**: Formul√°rios mobile-friendly
- **Impacto UX**:
  - Usu√°rios n√£o conseguem usar o sistema adequadamente em mobile
  - PDV inutiliz√°vel em tablets
  - Experi√™ncia frustrante para clientes no e-commerce mobile
  - Perda de vendas por problemas de usabilidade
  - Tabelas cortadas em telas pequenas
  - Menu inacess√≠vel em dispositivos m√≥veis
- **Solu√ß√µes necess√°rias**:
  - **Layout Responsivo**: Implementar menu hamburger e sidebar colaps√°vel
  - **Tabelas Mobile**: Criar vers√£o em cards para telas pequenas
  - **PDV Tablet**: Redesenhar layout para tablets (sidebar menor ou colaps√°vel)
  - **Formul√°rios Touch**: Aumentar tamanhos de campos e bot√µes
  - **Breakpoints**: Definir breakpoints adequados (sm, md, lg, xl)
  - **Testes**: Testar em diferentes dispositivos e resolu√ß√µes
- **Tecnologias a utilizar**:
  - Tailwind CSS responsive utilities (`sm:`, `md:`, `lg:`, `xl:`)
  - CSS Grid e Flexbox responsivos
  - JavaScript para menu hamburger
  - Touch-friendly components (min-height: 44px)
  - Viewport meta tag otimizada
- **Arquivos a modificar**:
  - `resources/views/layouts/admin.blade.php` (menu hamburger)
  - `resources/views/admin/*/index.blade.php` (tabelas ‚Üí cards)
  - `resources/views/admin/pos/index.blade.php` (layout tablet)
  - `resources/css/app.css` (media queries customizadas)
- **Prioridade por se√ß√£o**:
  - üî• **Cr√≠tico**: PDV (tablets) - Layout completamente quebrado
  - üî• **Cr√≠tico**: Admin Tables (smartphones) - Tabelas ileg√≠veis
  - ‚ö° **Alto**: Admin Menu (mobile) - Menu inacess√≠vel
  - ‚ö° **Alto**: E-commerce (smartphones) - Experi√™ncia de compra
  - ‚ö° **Alto**: Login/Registro (smartphones) - Formul√°rios pequenos
- **Breakpoints sugeridos**:
  - `sm: 640px` - Smartphones grandes
  - `md: 768px` - Tablets pequenos
  - `lg: 1024px` - Tablets grandes
  - `xl: 1280px` - Desktop
- **Data identificada**: 2025-05-25

## üìä Resumo Atualizado por Prioridade

### üî• Alta Prioridade (Cr√≠tico)
1. ‚úÖ **RESOLVIDO**: PDV - Busca de Produtos n√£o funciona (#1)
2. ‚úÖ **RESOLVIDO**: PDV - Busca de Cliente n√£o funciona (#2)
3. ‚úÖ **RESOLVIDO**: PDV JavaScript Functions (#30)
4. ‚úÖ **RESOLVIDO**: Purchase Model Fields (#31)
5. ‚úÖ **RESOLVIDO**: PDV - Produtos N√£o Aparecem na Busca (#38)
6. ‚úÖ **RESOLVIDO**: Sistema de Estoque Inexistente (#16)
7. ‚úÖ **RESOLVIDO**: Leads - Erro de Constraint Violation (#39)
8. üî¥ Sistema N√£o Responsivo para Dispositivos M√≥veis (#40)
9. üî¥ Sistema de Opcionais de Produtos (#32)
10. üî¥ Sistema de Pre√ßos Diferenciados (#33)
11. üî¥ Sistema de Kits de Produtos (#34)
12. üî¥ Interface PDV para Opcionais (#35)
13. üî¥ Controle de Estoque por Variantes (#37)
14. üî¥ View de Edi√ß√£o de Categorias (#11)

### ‚ö° M√©dia Prioridade
11. üî¥ Interface E-commerce para Opcionais (#36)
12. üî¥ Branding Incorreto no Admin Panel (#12)
13. üî¥ Login Customer - Identidade Visual (#10)
14. üî¥ JavaScript Inline - Problemas CSP (#18)

---

**√öltima atualiza√ß√£o**: 25/05/2025 (PDV Busca Produtos e Clientes Resolvidos)
**Total de issues**: 40
**Issues cr√≠ticas**: 16
**Issues resolvidas**: 8
**Novas funcionalidades**: 6 (opcionais, pre√ßos, kits, interfaces)
**Issues de UX**: 1 (responsividade mobile)
**Foco atual**: Responsividade para dispositivos m√≥veis e sistema de opcionais
**√öltimas resolu√ß√µes**: Issues #1 e #2 - PDV busca de produtos e clientes funcionando 